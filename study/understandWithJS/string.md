## 문자열

### 문자열의 표기 방법

JS

```js
console.log('문자열');
console.log("문자열");
console.log(`문자열`);
```

- 자바스크립트에서 문자열을 사용하는 방식은 두 단일 인용 따옴표 `'` 사이에 들어간 문자들, 또는 두 쌍따옴표 `"` 사이에 들어간 문자들, 또는 두 백틱 `` ` `` 안에 들어간 문자들이 문자열이 된다.

Ruby

```rb
puts '문자열'
puts "문자열"
puts %q(문자열)
puts %q!문자열!
puts %!문자열!
```

- 자바스크립트에서와 달리 루비에서는 위와 같이 5가지의 문자열 표기 방식을 지원한다.

```rb
puts '문'자열'
```

- 위와 같이 문자열 안에 `'`를 사용하고 싶을 때가 있다. 하지만 `'`으로 문자열을 감싸는 상황이라면 감싸고자 하는 문자열이 제대로 감싸지지 않고 문자열 안에서 `'`를 사용한 부분에서 문자열이 끊어지게 된다.
- 루비에서는 다양한 문자열 문법을 지원하기 때문에 만약 `'`와 `"`를 사용해야 하는 상황이라면 `%q(문'자"열)`과 같이 문자열 내에서 쓸 문자를 피할 수 있는 문법을 선택해서 문자열을 정의할 수 있다.

### 문자열 감싸는 기호를 문자열 안에 적기

```js
console.log('문\'자열');
console.log("문\"자열");
console.log(`문\`자열`);
```

- 문자열 안에서는 역 슬레시(`\`) 바로 뒤에 문자열을 감싸는 기호를 적어 주면 된다.

```rb
puts '문\'자열'
puts "문\"자열"
puts %q!문자\!열!
puts %!문자\!열!
```

- `'` `"` `!` 문자열은 `\'` `\"` `\!`와 같이 역 슬레시를 사용하는 것으로 가능하지만, `(`와 `)`의 경우에는 역슬레시를 쓰는 방법으로 가능하지 않다.
- `%q(문\(자\)열)`와 같은 방법으로 사용할 수 없다느 것이다.

### 문자열 연결하기

JS

```js
console.log('Hello' + ", " + `World`);
```

Ruby

```rb
puts 'Hello' + ", " + %!World!
```

- 문자열을 `+` 기호로 더하면 된다.

JS

```js
console.log('Hello'.concat(", ", `World`));
```

- 자바스크립트 문자열에 `.`으로 접근을 하면 문자열이 객체로 변하게 된다.
- 자바스크립트 문자열은 기본적으로 여러 메소드를 이미 갖고 있는데 그 중 문자열을 합쳐주는 `concat` 메소드를 사용하여 인자로 문자열을 넣어주면 연결된 문자열이 반환된다.

Ruby

```rb
puts 'Hello'.concat(", ", %!World!)
```

- 자바스크립트의 문자열이 바로 뒤에 `.`으로 접근할 때 객체가 되지만, 루비는 모든 타입이 객체이다. 루비에서도 마찬가지로 `.`으로 객체에 접근할 수 있고, 문자열 객체가 갖고 있는 `concat` 메소드를 사용하여 인자로 문자열을 넣어주면 연결된 문자열이 반환된다.

### 문자열에 변수 붙이기

JS

```js
var lang = "javascript";
console.log(lang + '문자열');
```

Ruby

```rb
lang = "ruby"
puts lang + '문자열'
```

- 변수와 문자열을 `+` 기호로 붙여 주면 된다.
- `문자 + 다른_타입`의 형태라면 `문자 + 문자열로_변환된_다른_타입`의 꼴로 실행되므로 결국 문자열이 된다. 만약 `다른_타입`이 문자열로 변환될 수 없다면 에러가 발생한다.

### 문자열 안에 변수 넣기

JS

```js
var lang = "javascript";
console.log(`${lang}문자열`);
```

- 자바스크립트의 경우 백틱 `` ` `` 안의 문자열에 `` `문자열${변수}문자열` ``의 방식으로 문자열 안에 변수를 넣을 수 있다.

```js
var lang = "javascript";
console.log(`${lang + " "}문자열`);
```

- 위와 같이 `${변수}`부분은 변수 뿐만 아니라 어떤 값으로 만들어지는 어떠한 방식의 자바스크립트 코드를 넣을 수 있다.
- 변수 `lang`와 " "가 합쳐저 하나의 문자열, 곧 하나의 값으로 되었기 대문에 `${}`의 `{}`안에 넣을 수 있는 것이다.

Ruby

```rb
lang = "ruby"
puts "#{lang}문자열"
```

- 루비의 경우에는 쌍따옴표 `"` 안의 문자열에 `"문자열#{변수}문자열"`의 방식으로 문자열 안에 변수를 넣을 수 있다. 따옴표 `'`를 사용하면 `#{변수}` 부분은 문자열로 그대로 출력 된다.
- `"#{lang}문자열"`의 출력 결과가 `ruby문자열`이 되는 것에 반해 쌍따옴표가 아닌 경우는 `'#{lang}문자열'`의 결과는 `#{lang}문자열`이 된다.

```rb
lang = "ruby"
puts "#{lang + " "}문자열"
```

- 자바스크립트와 마찬가지로 `#{변수}` 부분은 변수 뿐만 아니라 어떤 값으로 만들어지는 어떠한 방식의 루비 코드를 넣을 수 있다.
- 변수 `lang`와 " "가 합쳐저 하나의 문자열, 곧 하나의 값으로 되었기 대문에 `#{}`의 `{}`안에 넣을 수 있는 것이다.

### 여러 줄의 문자열 적기

- 프로그래밍 언어를 실행할 때 개행은 코드가 끊어지는 것을 의미하는 것으로 해석될 수 있다.

JS

```js
console.log("
Hello,
World
");
```

- 위의 코드는 `"`으로 문자열이 열리고 나서 개행이 이뤄졌는데 자바스크립트는 이를 "에서 코드가 끊긴 형태로 개행이 이뤄진 부분을 세미콜론(`;`)으로 종결된 것으로 인식한다.
- `'` `"`으로 문자열을 감싸는 경우 개행 없는 문자열로 만들어야 하고 만약 개행을 넣고 싶다면 개행 문자인 `\n`을 넣어주는 방법을 사용해야 하지만, 이러면 문자열이 잘 정리되지 않는 문제가 있다.

```js
console.log(`
Hello,
World
`);
```

- 위와 같이 `` ` `` 백틱을 사용하면 여러 줄의 문자열을 적을 수 있다.

Ruby

```rb
puts "
Hello,
World
"
```

- 루비의 경우에는 문자열을 만드는 기호에 관계 없이 여러 행의 개행을 처리할 수 있다.

### 여러 줄 문자열의 들여쓰기

- 문자열을 사용할 때 코드를 깔끔하게 보이게 하기 위해서 들여쓰기로 쓰고 싶은 경우가 있을 수 있다. 문자열은 들여쓰기로 쓰고 출력될 때는 들여쓰기 없이 사용하기 위한 방법이다.

JS

```js
console.log(`
    Hello,
    World
`.replace(/^\s+/mg, ""),
);
```

- 위의 코드와 같이 각 줄에서 맨 앞쪽의 공백을 제거해 주는 코드를 추가로 작성해 주어야 한다.
- `replace(/^\s+/mg, "")`는 각 줄에서(m으로 지정된 옵션) 반복적으로 (g으로 지정된 옵션) 맨 첫번째 (/^으로 지정된 옵션) 연속된 공백문자(\s+)를 빈 문자열로 (""으로 지정된 옵션) 바꾼다는 의미를 가지고 있다. `/^\s+/mg`란 표현을 정규표현식이라고 하는데 문자열을 선택할 수 있는 규칙을 만드는 방법이다.

Ruby

```rb
puts <<~Hello
    Hello,
    World
Hello
```

- `<<~상수명` 으로 시작해서 다른 행에 `상수명`으로 끝나는 공간 사이에 문자열을 적을 수 있는데 맨 앞의 들여쓰기가 자동으로 제거된 문자열을 만들 수 있다.
- 자바스크립트 문법은 들여쓰기를 직접 제거하는 코드를 추가해 주어야 했지만, 루비에서는 자동으로 들여쓰기를 제거하는 문법을 사용할 수 있다.
- 만약 들여쓰기를 제거하고 싶지 않은 경우에는 `~`를 빼 주면 된다.

```rb
puts <<~EOS
    Hello,
    World
EOS
```

- 상수명에 특별한 의미를 부여하고 싶지 않을 경우 보통은 EOS(End Of String)를 사용한다.

### heredoc을 사용하는 이유

- `<<~EOS` ... `EOS`를 사용하는 코드를 앞서 보았다. 이렇게 문자열을 적는 방식을 heredoc이라고 부르는데 어떤 긴 문자열을 복사해서 문자열로 만든다고 생각 해 보자. 그러면 루비의 문자열을 감쌀 때 사용하는 `'` `"` `!`가 포함되어 있을 수 있고 이 때는 내부의 문자열로 인해서 문자열을 감싸는데 문제가 발생할 수 있다. 감싸는 기호 안에 들어 있는 `'` `"` `!`를 백슬러시를 사용한 기호 `\'` `\"` `\!`로 바꾸어 주어야 한다. 이런 작업을 줄이기 위해서 내부 문자열의 변경 없이 어떤 문자열이든 넣을 수 있는 방법으로 heredoc을 사용한다.
- 임의의 긴 상수명을 지정한다면 복사한 문자열이 길더라도 겹치는 경우가 없을 것이고 어떠한 긴 문자열이라도 안전하기 문자열의 끝을 정할 수 있다는 장점이 있다.

#### 빈 개행 제거하기

```rb
puts <<-EOS
    Hello,

    World
EOS
```

- `<<-상수명`의 경우 : 빈 개행이 제거되고 들여쓰기는 그대로 유지된다.

#### 들여쓰기 제거하기

```rb
puts <<~EOS
    Hello,

    World
EOS
```

- `<<~상수명`의 경우 : 빈 개행은 그대로 있고 들여쓰기가 제거된다.

#### 그냥 문자열 그대로 쓰기

```rb
puts <<EOS
    Hello,

    World
EOS
```

- `<<상수명`의 경우 : 빈 개행 및 들여쓰기 모두 유지된다.
